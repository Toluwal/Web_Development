"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93995],{381269:(e,a,t)=>{t.d(a,{G:()=>q});var i=t(28071),r=t(98176),n=t(678540),s=t(744697);let m=JSON.parse('{"id":"81a54caf2d8bafe1c2366ff835f330bc83876fc0e874b8b3b2652c758489ad1d","type":"query","name":"FetchRelatedAssets","source":"query FetchRelatedAssets($where:MediaWhere!,$sameArtistWhere:SearchWhere!,$sameModelWhere:SearchWhere!,$topSimilarCount:Int,$recommendationAnchors:RecommendationAnchors,$recommendationCountry:CountryCode,$recommendationFilters:RecommendationFilters!,$recommendationLimit:UnsignedInt,$recommendationStrategy:StrategyEnum!,$fetchRecommendations:Boolean! = false,$fetchSameArtist:Boolean! = false,$fetchSameModel:Boolean! = false,$fetchSimilarGeneratedImages:Boolean! = false,$fetchSimilarImages:Boolean! = false,$fetchSimilarVideos:Boolean! = false,$similarImagesCollectionType:CollectionTypeEnum! = APPROVED,$similarVideosCollectionType:CollectionTypeEnum! = APPROVED_VIDEO){creativeImages(where:$where){data{...SimilarGeneratedImagesFragment @include(if:$fetchSimilarGeneratedImages)...SimilarImagesFragment @include(if:$fetchSimilarImages)...SimilarVideosFragment @include(if:$fetchSimilarVideos)__typename}__typename}sameArtist:creativeMediaSearch(where:$sameArtistWhere)@include(if:$fetchSameArtist){...SearchResultsFragment __typename}sameModel:creativeMediaSearch(where:$sameModelWhere)@include(if:$fetchSameModel){...SearchResultsFragment __typename}recommendations(anchors:$recommendationAnchors strategy:$recommendationStrategy country:$recommendationCountry limit:$recommendationLimit filters:$recommendationFilters)@include(if:$fetchRecommendations){...RecommendationFragment __typename}}fragment SimilarGeneratedImagesFragment on CreativeImage{similarGeneratedImages:similarImages(top:$topSimilarCount collectionType:GENERATED){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}}}}__typename}fragment SimilarEntityIdFragment on CreativeSimilarImageResult{entities{classicId __typename}__typename}fragment CreativeImageMediaFieldsFragment on CreativeImage{...CreativeImageBasicInfoFragment...CreativeImageBooleanFieldsFragment sellableImageSizes{...CreativeImageSellableSizesFragment __typename}__typename}fragment CreativeImageBasicInfoFragment on CreativeImage{__typename classicId aspect aspectRatio contributorId description thumbnailImageUrlTemplate secureWatermarkImageUrl keywords metadataStatus{mainStatus qualifierStatus __typename}channels contentTier{id __typename}contentTiers}fragment CreativeImageBooleanFieldsFragment on CreativeImage{exclusiveToSstk is3dSpinner isAdult isEditorial isGenerated isIllustration isIpReviewed isVector __typename}fragment CreativeImageSellableSizesFragment on SellableImageSize{...on SellableCreativeImageJpgSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImagePngSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImagePSDSize{__typename name displayName fileSize humanFileSize format dpi height{centimetersLabel inchesLabel pixels __typename}width{centimetersLabel inchesLabel pixels __typename}}...on SellableCreativeImageVectorSize{__typename name displayName fileSize humanFileSize format}__typename}fragment SimilarImagesFragment on CreativeImage{similarImages(top:$topSimilarCount collectionType:$similarImagesCollectionType){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}}}}__typename}fragment SimilarVideosFragment on CreativeImage{similarVideos:similarImages(top:$topSimilarCount collectionType:$similarVideosCollectionType){__typename...SimilarEntityIdFragment entities{__typename media{__typename...on CreativeVideo{...CreativeVideoMediaFieldsFragment __typename}}}}__typename}fragment CreativeVideoMediaFieldsFragment on CreativeVideo{...CreativeVideoBasicInfoFragment...CreativeVideoBooleanFieldsFragment sellableVideoSizes{...CreativeVideoSellableSizesFragment __typename}__typename}fragment CreativeVideoBasicInfoFragment on CreativeVideo{__typename type classicId aspect aspectRatio contributorId description addedDate channels duration previewImageUrl keywords secureWatermarkUrl{mp4 webm __typename}translatedDescriptions{availableTranslatedDescriptions{lang description __typename}description __typename}contentTiers}fragment CreativeVideoBooleanFieldsFragment on CreativeVideo{exclusiveToSstk isAdult isEditorial isIpReviewed __typename}fragment CreativeVideoSellableSizesFragment on SellableCreativeVideoSize{name displayName format videoCodec fileSize humanFileSize fps height{pixels __typename}width{pixels __typename}__typename}fragment SearchResultsFragment on SearchResponse{results{docs{...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}__typename}__typename}__typename}fragment RecommendationFragment on RecommendationResponse{response{results{media{...on CreativeImage{...CreativeImageMediaFieldsFragment __typename}__typename}__typename}tracer __typename}internals{providers{resultsCount __typename}__typename}__typename}"}');var l=t(200291),o=t(489741),d=t(968481),c=t.n(d);let{publicRuntimeConfig:{apiEndpoints:p}}=c()(),g=e=>[i.$E,i.kc,i.vo].includes(e?.imageType),u=e=>!!e?.releases?.length&&[i.$E,i.kc,i.vo].includes(e?.imageType),_=e=>(0,n.Bq)({asset:e}),y=e=>(0,n.Bq)({asset:e})||[i.$E,i.kc,i.vo].includes(e?.imageType),h=e=>(0,n.Bq)({asset:e})||[i.$E,i.kc,i.vo].includes(e?.imageType),S=({asset:e,isMobile:a,isSameArtist:t,isSameModel:i,locale:n,region:s,isFilterByUnlimited:m})=>{let{contributorId:o="",id:d,keywords:c,releases:p}=e||{},g=a?r.Zh:r.SE,u=a?r.Zh:r.d3,_={cache:!0,countryCode:s,language:n,mediaType:l.$9.Image,rows:t?u:g,safeSearch:{isSafe:!0},sortOrder:l.ti.Popular,start:0,...m&&{classicContentTiers:{anyOf:[l.i2.UnlimitedV_0_1]}}};return t&&o?{..._,contributors:{ids:{anyOf:[o]}},query:c?.[0]||""}:i&&p?{..._,classicIds:{noneOf:[d]},releases:{classicModelReleaseIds:{anyOf:p.map(String)}}}:_},f=({asset:e,brand:a,experiments:t,headers:i={},isBot:r,isLoggedInUser:n=!1,isMobile:d=!1,locale:c,region:f,searchTerm:I="",subscriptionProduct:v,topSimilarCount:C=10,isFilterByUnlimited:F=!1})=>{let b=(0,s.g2)({asset:e,locale:c,region:f,searchTerm:I,subscriptionProduct:v,isFilterByUnlimited:F}),$=S({asset:e,isMobile:d,isSameArtist:!0,locale:c,region:f,isFilterByUnlimited:F}),A=S({asset:e,isMobile:d,isSameModel:!0,locale:c,region:f,isFilterByUnlimited:F}),T=(0,s.aR)({asset:e,isBot:r,isLoggedInUser:n,isMobile:d,region:f}),R=g(e),V=u(e),E=_(e),w=y(e),z=h(e),M={where:{classicId:e.id},...{fetchRecommendations:T,...b},...{fetchSameArtist:R,sameArtistWhere:$},...{fetchSameModel:V,sameModelWhere:A},...E&&{fetchSimilarGeneratedImages:E,topSimilarCount:C},...w&&{fetchSimilarImages:w,topSimilarCount:C,...F&&{similarImagesCollectionType:l.e9.UnlimitedImage}},...z&&{fetchSimilarVideos:z,topSimilarCount:C,...F&&{similarVideosCollectionType:l.e9.UnlimitedVideo}}};return{formattedRequest:{document:m.source,requestHeaders:{...(0,o.C)({brand:a,experiments:t,page:"",isBot:r}),...i},url:`${p.graphGateway}/graphql`,variables:M},query:m.source,variables:M}};var I=t(50432),v=t(985945),C=t(991418),F=t(996786),b=t(889761),$=t(307528),A=t(602320);let T=e=>(e??[]).map(e=>(0,A.u)(e)),R=e=>(e??[]).map(e=>(0,$.PU)(e)),V=e=>{let{creativeImages:{data:a}={data:[]},recommendations:t,sameArtist:i,sameModel:r}=e||{},n=(0,s.Er)({recommendations:t})||[],m=R(i?.results?.docs)||[],l=R(r?.results?.docs)||[],o=T(a?.[0]?.similarImages?.entities)||[],d=T(a?.[0]?.similarVideos?.entities)||[];return{personalizedImages:n,sameArtist:m,sameModel:l,visuallySimilar:o,visuallySimilarGenerated:T(a?.[0]?.similarGeneratedImages?.entities)||[],visuallySimilarVideos:d}};var E=t(279096),w=t(726325),z=t(936139),M=t(483010),P=t(727973),k=t(796955),B=t(647588),x=t(600538);let L=(0,B.NF)()?3e3:15e3,{publicRuntimeConfig:{_app:{name:U}}}=c()(),G={personalizedImages:[],sameArtist:[],sameModel:[],visuallySimilar:[],visuallySimilarGenerated:[],visuallySimilarVideos:[]},N=(e,a,t)=>{let i=e&&"object"==typeof e&&"response"in e?e?.response:void 0;if(i){let e=i?.errors||[],t=i?.extensions?.valueCompletion||[],r={message:i?.errors?.[0]?.message||"N/A"};e.forEach((e,a)=>{r[`error${a+1}`]=`${e.message}, Path: ${e.path?.join(".")||"N/A"}`}),t.forEach((e,a)=>{r[`valueCompletion${a+1}`]=`${e.message}, Path: ${e.path?.join(".")||"N/A"}`}),a({actionName:"FetchRelatedAssets - GraphQLError",customAttributes:r});let n=i?.data;if(n)return V(n)}if(e instanceof Error){if("AbortError"===e.name)return a({actionName:"FetchRelatedAssets - Timeout",customAttributes:{message:"Fetch request timed out",timeoutDuration:t}}),G;a({actionName:"FetchRelatedAssets - Error",customAttributes:{message:e.message||"unknown error occurred"}});let r=i?.data;if(r)return V(r)}return G},q=({asset:e,shouldFetch:a=!0})=>{let{region:t,locale:i}=(0,C.Y)(),{isGoodBot:n}=(0,v.l)(),{brand:s}=(0,w.P)(),m=(0,M.a)(),{type:l}=e||{},o=(0,P.h)(),{getSearchContext:d}=(0,E.J)(),{search_term:c}=d?.()||{},p=m?r.Zh:2*r.SE,g=(0,k.J)(),u=(0,b.H)(),_=(0,F.r)({asset:e,features:g,isUnlimitedExperience:u}),y=g?.subscriptions?.[0]?.product?.name,{formattedRequest:{requestHeaders:h,variables:S},query:$}=f({asset:e,brand:s,experiments:{},headers:{[I.E3]:`${U}/asset-details-page/related-assets`,[I.ef]:`${l}-related-assets`},isBot:n,isMobile:m,isLoggedInUser:!!g?.userType,locale:i,region:t,searchTerm:"undefined"===c?"":c,subscriptionProduct:y,topSimilarCount:p,isFilterByUnlimited:_}),A=(0,z.s)("/"),T=[$],R=n?15e3:L,B=async()=>{try{let e=new AbortController,a=setTimeout(()=>e.abort(),R),t=await A($,S,{headers:h,signal:e.signal});return clearTimeout(a),V(t)}catch(e){return N(e,o,R)}};return(0,x.I)({enabled:a,queryKey:T,queryFn:B})}},741695:(e,a,t)=>{t.d(a,{Q:()=>n});var i=t(66228),r=t(630888);let n=t.n(r)()(()=>Promise.all([t.e(27510),t.e(80015),t.e(72887),t.e(16065),t.e(46633)]).then(t.bind(t,122622)).then(e=>({default:e.RelatedSections})),{loadableGenerated:{webpack:()=>[122622]},loading:i.B})},744697:(e,a,t)=>{t.d(a,{Er:()=>g,aR:()=>c,g2:()=>p,x8:()=>o});var i=t(28071),r=t(326480),n=t(150298),s=t(98176),m=t(307528),l=t(200291);let o=["IN"],d=e=>{switch(e.toLowerCase()){case i.$E:return l.XJ.Illustration;case i.vo:return l.XJ.Photo;case i.kc:return l.XJ.Vector;default:return l.XJ.Photo}},c=({asset:e,isBot:a,isLoggedInUser:t,isMobile:r,region:n})=>{if(a)return!1;let s=[i.$E,i.kc,i.vo].includes(e?.imageType),m=!o.includes(n)&&!r;return s&&(t||m)},p=({asset:e,limit:a=s.hI,locale:t,region:i,searchTerm:n="",subscriptionProduct:m,isFilterByUnlimited:o=!1})=>{let{id:c,imageType:p=l.XJ.Photo}=e||{},g="undefined"===n?"":n,u=RegExp("^id:*").test(g);return{recommendationAnchors:{classicIds:[c],locale:t,mediaType:l.g9.Image,...m?{subscriptionProduct:m}:{},...!u&&{text:g}},recommendationCountry:i,recommendationFilters:{channels:[l.Tm.Shutterstock],imageType:d(p),mediaType:l.g9.Image,...o&&{content:{tiers:r.dV}}},recommendationLimit:a,recommendationStrategy:l.xp.Style}},g=({recommendations:e,withEligibleChannel:a})=>{let{response:t,internals:i}=e||{},{results:r,tracer:s}=t||{},{resultsCount:l}=i?.providers?.[0]||{};return r?.reduce((e,{media:t})=>{if(t?.__typename===n.Vi){let i={...(0,m.PU)(t,a),meta:{trackingId:s,totalCount:{images:l}}};e.push(i)}return e},[])||[]}},893995:(e,a,t)=>{t.r(a),t.d(a,{RelatedSectionsToUse:()=>d});var i=t(424629),r=t(741695),n=t(66228),s=t(985945),m=t(678540),l=t(381269),o=t(483010);let d=({asset:e,labels:a,isLocal:t,getSearchTermPathProps:d})=>{let c=(0,m.Uh)(e),{isGoodBot:p}=(0,s.l)(),g=(0,o.a)(),{data:u={},isLoading:_}=(0,l.G)({asset:e,shouldFetch:!p&&!c})||{},{sameModel:y=[],sameArtist:h=[],visuallySimilar:S=[],visuallySimilarVideos:f=[],visuallySimilarGenerated:I=[],personalizedImages:v=[]}=p?e:u,C=!g&&p;return _?(0,i.jsx)(n.B,{}):!c&&(_||c)?null:(0,i.jsx)(r.Q,{asset:e,gridSpacing:4,labels:a,personalizedImages:v,sameArtistAssets:h,sameModel:y,showSimilarVideos:!0,visuallySimilar:S,visuallySimilarMaxRows:2,visuallySimilarVideos:f,visuallySimilarGenerated:I,withInlineCta:!c,isLocal:t,useCssGrid:C,maxRows:C?null:2,getSearchTermPathProps:d,isCustomMobileGridWidth:!0})}},996786:(e,a,t)=>{t.d(a,{r:()=>s});var i=t(678540),r=t(28071);let n=(e,a)=>{let t=e?.isActiveFlexUser,i=e?.isActiveCreditPackUser;if(t||i)return!0;switch(a){case r.W1:return e?.isActiveImageSubUser||e?.isActiveImagePackUser;case r.G_:return!!e?.isActiveVideoPlanUser;case r.on:case r.M9:return!!e?.isActiveMusicPlanUser;default:return!1}},s=({asset:e,features:a,bypassAssetCheck:t,assetType:r,isUnlimitedExperience:s})=>{let m=t||(0,i.sY)(e),l=n(a,e?(0,i.f0)(e):r),o=!!a?.isUserWithActiveBasicUnlimitedPlan,d=!a?.userId||a?.isFBA||a?.isLapsedAccount;return!!((o&&!l||d&&s)&&m)}}}]);
//# sourceMappingURL=93995.f68c446db5b910b0.js.map